stages:
- build
- test
- delivery

build:
  stage : build
  script: 
    - cd sh-frontend
    - npm install
    - npm run build

test:
  image: node:latest
  stage: test
  script:
    - cd backend-submodule
    - ./gradlew build -x test
    - cd ..
    - docker-compose build
    - cd ..
    - cd sh-frontend
    - npm install
    - npm run
    - npm run runHeadless
  
delivery:
    stage: delivery
    script:
        - cd backend-submodule/sh-backend
        - ./gradlew build -x test
        - cd ../../
        - docker-compose build